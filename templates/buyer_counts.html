{% extends "base.html" %}
{% block title %}Количество покупок{% endblock %}
{% block content %}
  <h1 class="h4 mb-4">Покупатели и количество приобретенных предметов</h1>
  <form class="filter-form row gy-2 gx-3 align-items-end mb-4" method="get">
    <div class="col-sm-4 col-md-3">
      <label class="form-label" for="start">Дата с</label>
      <input class="form-control" type="date" id="start" name="start" value="{{ start }}" />
    </div>
    <div class="col-sm-4 col-md-3">
      <label class="form-label" for="end">Дата по</label>
      <input class="form-control" type="date" id="end" name="end" value="{{ end }}" />
    </div>
    <div class="col-sm-4 col-md-3">
      <button class="btn btn-primary w-100" type="submit">Показать</button>
    </div>
  </form>

  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Покупатель</th>
          <th class="text-end">Кол-во предметов</th>
        </tr>
      </thead>
      <tbody>
        {% if buyers %}
          {% for buyer in buyers %}
            <tr>
              <td>{{ buyer.name }}</td>
              <td class="text-end">{{ buyer.items_bought }}</td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="2" class="text-center text-muted py-4">Нет данных.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
{% endblock %}

